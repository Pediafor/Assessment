# RabbitMQ Configuration for Pediafor Assessment Platform
# This configuration optimizes RabbitMQ for microservice communication

# General Settings
default_vhost = pediafor
default_user = admin
default_pass = pediafor2024

# Network Configuration
listeners.tcp.default = 5672
management.tcp.port = 15672

# Performance Settings
vm_memory_high_watermark.relative = 0.8
disk_free_limit.relative = 2GB

# Clustering (for future scaling)
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config

# Logging
log.console = true
log.console.level = info
log.file = /var/log/rabbitmq/rabbit.log
log.file.level = info
log.file.rotation.size = 10485760
log.file.rotation.count = 5

# Management Plugin
management.rates_mode = basic
management.sample_retention_policies.global.minute = 5
management.sample_retention_policies.global.hour = 60
management.sample_retention_policies.global.day = 1200

# Message TTL and Queue Settings
default_user_tags.administrator = true

# Security
ssl_options.verify = verify_none
ssl_options.fail_if_no_peer_cert = false

# Consumer timeout (important for async processing)
consumer_timeout = 3600000

# Channel and connection limits
channel_max = 2047
connection_max = 1000

# Heartbeat
heartbeat = 60

# Memory and disk monitoring
vm_memory_high_watermark_paging_ratio = 0.5
disk_free_limit.absolute = 2GB